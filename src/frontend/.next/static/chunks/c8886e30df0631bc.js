(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let a=[{id:"graph",label:"ГРАФ"},{id:"events",label:"СОБЫТИЯ"},{id:"stats",label:"СТАТИСТИКА"},{id:"agents",label:"АГЕНТЫ"},{id:"messages",label:"СООБЩЕНИЯ"}];function o({children:e,activeTab:o="graph",onTabChange:n,onAddEvent:s,timeSpeed:l=1,onTimeSpeedChange:i,worldTime:c}){let[d,m]=(0,r.useState)("--:--:--"),[u,x]=(0,r.useState)("--.--.----"),[p,g]=(0,r.useState)(""),[f,b]=(0,r.useState)(!1),[h,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{y(!0)},[]),(0,r.useEffect)(()=>{if(!c){m("--:--:--"),x("--.--.----");return}let e=new Date(c);if(Number.isNaN(e.getTime())){m("--:--:--"),x("--.--.----");return}let t=e.getTime(),r=Math.max(0,l),a=()=>{let e=new Date(t);m(e.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit",second:"2-digit"})),x(e.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"})),t+=1e3*r*60};a();let o=setInterval(a,1e3);return()=>clearInterval(o)},[c,l]);let v=()=>{p.trim()&&s&&(s(p.trim()),g(""))};return(0,t.jsxs)("div",{className:"relative w-screen overflow-hidden flex flex-col",style:{height:"100dvh",backgroundColor:"var(--background)"},children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-50",style:{background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(229,195,75,0.008) 2px, rgba(229,195,75,0.008) 4px)"}}),(0,t.jsxs)("svg",{className:"pointer-events-none absolute inset-0 z-40 hidden md:block",style:{width:"100%",height:"100%"},viewBox:"0 0 1000 1000",preserveAspectRatio:"none",fill:"none",children:[(0,t.jsxs)("defs",{children:[(0,t.jsxs)("filter",{id:"glow",children:[(0,t.jsx)("feGaussianBlur",{stdDeviation:"2",result:"blur"}),(0,t.jsxs)("feMerge",{children:[(0,t.jsx)("feMergeNode",{in:"blur"}),(0,t.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,t.jsxs)("filter",{id:"glow-strong",children:[(0,t.jsx)("feGaussianBlur",{stdDeviation:"4",result:"blur"}),(0,t.jsxs)("feMerge",{children:[(0,t.jsx)("feMergeNode",{in:"blur"}),(0,t.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,t.jsx)("path",{d:"M 30 6 L 970 6 L 994 30 L 994 970 L 970 994 L 30 994 L 6 970 L 6 30 Z",stroke:"var(--cyber-glow)",strokeWidth:"1.2",filter:"url(#glow)",opacity:"0.8"}),(0,t.jsx)("path",{d:"M 34 10 L 966 10 L 990 34 L 990 966 L 966 990 L 34 990 L 10 966 L 10 34 Z",stroke:"var(--cyber-glow)",strokeWidth:"0.3",opacity:"0.25"}),(0,t.jsx)("path",{d:"M 6 55 L 6 30 L 30 6",stroke:"var(--cyber-glow)",strokeWidth:"2",filter:"url(#glow-strong)",strokeLinecap:"square"}),(0,t.jsx)("path",{d:"M 970 6 L 994 30 L 994 55",stroke:"var(--cyber-glow)",strokeWidth:"2",filter:"url(#glow-strong)",strokeLinecap:"square"}),(0,t.jsx)("path",{d:"M 994 945 L 994 970 L 970 994",stroke:"var(--cyber-glow)",strokeWidth:"2",filter:"url(#glow-strong)",strokeLinecap:"square"}),(0,t.jsx)("path",{d:"M 30 994 L 6 970 L 6 945",stroke:"var(--cyber-glow)",strokeWidth:"2",filter:"url(#glow-strong)",strokeLinecap:"square"}),[150,300,500,700,850].map(e=>(0,t.jsx)("line",{x1:e,y1:6,x2:e,y2:12,stroke:"var(--cyber-glow)",strokeWidth:"0.5",opacity:"0.35"},e))]}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-[2px] z-40 md:hidden",style:{border:"1px solid var(--cyber-glow)",boxShadow:"0 0 6px var(--cyber-glow-dim), inset 0 0 6px var(--cyber-glow-dim)",opacity:.5}}),(0,t.jsx)("div",{className:"absolute left-[0.35%] top-1/2 z-40 -translate-y-1/2 flex-col gap-1 hidden lg:flex",children:[.9,.7,.5,.3].map((e,r)=>(0,t.jsx)("div",{className:"rounded-sm",style:{width:"3px",height:"14px",backgroundColor:"var(--cyber-glow)",opacity:e,boxShadow:"0 0 4px var(--cyber-glow-dim)"}},r))}),(0,t.jsx)("div",{className:"absolute right-[0.35%] top-1/2 z-40 -translate-y-1/2 flex-col gap-1 hidden lg:flex",children:[.3,.5,.7,.9].map((e,r)=>(0,t.jsx)("div",{className:"rounded-sm",style:{width:"3px",height:"14px",backgroundColor:"var(--cyber-glow)",opacity:e,boxShadow:"0 0 4px var(--cyber-glow-dim)"}},r))}),(0,t.jsxs)("div",{className:"relative z-10 flex flex-col h-full",style:{padding:"1.2% 1.8%"},children:[(0,t.jsxs)("header",{className:"shrink-0 flex flex-col gap-2 pb-[0.6%]",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-4 pl-[1.5%]",children:[(0,t.jsx)("h1",{className:"font-mono text-base md:text-lg lg:text-xl tracking-[0.2em] uppercase whitespace-nowrap",style:{color:"var(--cyber-glow)"},children:"LONG LIVE MODELS"}),(0,t.jsxs)("span",{className:"font-mono text-xs md:text-sm tabular-nums whitespace-nowrap",style:{color:"var(--cyber-glow)",opacity:.5},children:[u,(0,t.jsx)("span",{className:"mx-1.5",style:{opacity:.4},children:"/"}),d]})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("nav",{className:"flex items-center pl-[1.5%]",children:a.map(e=>{let r=o===e.id;return(0,t.jsx)("button",{onClick:()=>n?.(e.id),className:"font-mono text-sm md:text-base tracking-wider uppercase cursor-pointer whitespace-nowrap",style:{padding:"6px 14px",color:r?"var(--cyber-glow)":"var(--muted-foreground)",backgroundColor:r?"rgba(229,195,75,0.1)":"transparent",borderBottom:r?"2px solid var(--cyber-glow)":"2px solid transparent",textShadow:r?"0 0 10px rgba(229,195,75,0.4)":"none",transition:"all 0.2s ease"},onMouseEnter:e=>{r||(e.currentTarget.style.color="var(--cyber-glow)",e.currentTarget.style.backgroundColor="rgba(229,195,75,0.06)",e.currentTarget.style.textShadow="0 0 10px rgba(229,195,75,0.3)",e.currentTarget.style.borderBottom="2px solid rgba(229,195,75,0.4)")},onMouseLeave:e=>{r||(e.currentTarget.style.color="var(--muted-foreground)",e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.textShadow="none",e.currentTarget.style.borderBottom="2px solid transparent")},children:e.label},e.id)})}),(0,t.jsxs)("div",{className:"relative flex items-center gap-3 shrink-0",style:{padding:"5px 14px",backgroundColor:"rgba(229,195,75,0.04)",border:"1px solid rgba(229,195,75,0.1)",clipPath:"polygon(4px 0, calc(100% - 4px) 0, 100% 4px, 100% calc(100% - 4px), calc(100% - 4px) 100%, 4px 100%, 0 calc(100% - 4px), 0 4px)"},onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:[(0,t.jsx)("span",{className:"font-mono text-xs tracking-widest uppercase select-none",style:{color:"var(--muted-foreground)"},children:"СКОРОСТЬ"}),(0,t.jsx)("input",{type:"range",min:0,max:5,step:.1,value:l,onChange:e=>i?.(Math.round(10*parseFloat(e.target.value))/10),className:"cyber-slider h-1",style:{width:"clamp(80px, 8vw, 160px)",background:`linear-gradient(to right, var(--cyber-glow) ${l/5*100}%, var(--border) ${l/5*100}%)`}}),(0,t.jsxs)("button",{onClick:()=>i?.(1),className:"font-mono text-sm tabular-nums cursor-pointer",title:h?`Клик = сброс на 1x`:void 0,style:{color:"var(--cyber-glow)",textShadow:l>0?"0 0 8px rgba(229,195,75,0.4)":"none",background:"none",border:"none",padding:0,width:"3.5em",textAlign:"right",transition:"opacity 0.2s ease, text-shadow 0.2s ease",opacity:1===l?.7:1},onMouseEnter:e=>{e.currentTarget.style.textShadow="0 0 14px rgba(229,195,75,0.7)"},onMouseLeave:e=>{e.currentTarget.style.textShadow=l>0?"0 0 8px rgba(229,195,75,0.4)":"none"},children:[l.toFixed(1),"x"]}),f&&(0,t.jsx)("div",{className:"absolute top-full right-0 mt-2 px-3 py-1.5 font-mono text-[10px] tracking-wide whitespace-nowrap pointer-events-none z-50 hidden lg:block",style:{backgroundColor:"rgba(17,17,24,0.95)",border:"1px solid rgba(229,195,75,0.25)",color:"var(--cyber-glow)",clipPath:"polygon(4px 0, calc(100% - 4px) 0, 100% 4px, 100% calc(100% - 4px), calc(100% - 4px) 100%, 4px 100%, 0 calc(100% - 4px), 0 4px)"},children:"Скорость течения времени мира // Клик на значение = сброс"})]})]})]}),(0,t.jsx)("div",{className:"relative flex-1 min-h-0 overflow-hidden rounded-sm border",style:{borderColor:"rgba(229,195,75,0.2)"},children:e}),(0,t.jsx)("div",{className:"shrink-0",style:{paddingTop:"0.6%"},children:(0,t.jsx)("div",{className:"relative overflow-hidden",style:{clipPath:"polygon(8px 0, calc(100% - 8px) 0, 100% 8px, 100% calc(100% - 8px), calc(100% - 8px) 100%, 8px 100%, 0 calc(100% - 8px), 0 8px)"},children:(0,t.jsxs)("div",{className:"flex items-center gap-3",style:{padding:"4px 6px",border:"1px solid rgba(229,195,75,0.2)",backgroundColor:"rgba(17,17,24,0.9)",animation:"cyber-shimmer 4s ease-in-out infinite",clipPath:"polygon(8px 0, calc(100% - 8px) 0, 100% 8px, 100% calc(100% - 8px), calc(100% - 8px) 100%, 8px 100%, 0 calc(100% - 8px), 0 8px)"},children:[(0,t.jsx)("div",{className:"shrink-0 pl-2",children:(0,t.jsx)("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:"var(--cyber-glow)",boxShadow:"0 0 6px var(--cyber-glow-dim)",animation:"cyber-pulse 2s ease-in-out infinite"}})}),(0,t.jsx)("input",{type:"text",value:p,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),v())},placeholder:"Введите событие для мира агентов...",className:"flex-1 bg-transparent font-mono text-sm md:text-base py-2.5 placeholder:opacity-30 focus:outline-none",style:{color:"var(--foreground)",caretColor:"var(--cyber-glow)",paddingLeft:"8px",paddingRight:"8px"}}),(0,t.jsx)("button",{onClick:v,className:"shrink-0 font-mono text-xs md:text-sm tracking-widest uppercase cursor-pointer",style:{padding:"10px 20px",marginRight:"4px",backgroundColor:"rgba(229,195,75,0.08)",color:"var(--cyber-glow)",border:"1px solid rgba(229,195,75,0.25)",clipPath:"polygon(6px 0, calc(100% - 6px) 0, 100% 6px, 100% calc(100% - 6px), calc(100% - 6px) 100%, 6px 100%, 0 calc(100% - 6px), 0 6px)",transition:"all 0.25s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(229,195,75,0.18)",e.currentTarget.style.borderColor="rgba(229,195,75,0.6)",e.currentTarget.style.boxShadow="0 0 20px rgba(229,195,75,0.15), inset 0 0 12px rgba(229,195,75,0.06)",e.currentTarget.style.textShadow="0 0 10px rgba(229,195,75,0.5)",e.currentTarget.style.color="#f5d96b"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(229,195,75,0.08)",e.currentTarget.style.borderColor="rgba(229,195,75,0.25)",e.currentTarget.style.boxShadow="none",e.currentTarget.style.textShadow="none",e.currentTarget.style.color="var(--cyber-glow)"},onMouseDown:e=>{e.currentTarget.style.backgroundColor="rgba(229,195,75,0.3)",e.currentTarget.style.transform="scale(0.97)"},onMouseUp:e=>{e.currentTarget.style.backgroundColor="rgba(229,195,75,0.18)",e.currentTarget.style.transform="scale(1)"},children:"ДОБАВИТЬ СОБЫТИЕ"})]})})})]})]})}var n=e.i(47167);let s={happy:{color:"#4ade80",label:"РЎС‡Р°СЃС‚Р»РёРІ"},neutral:{color:"#a0a0b0",label:"РќРµР№С‚СЂР°Р»РµРЅ"},sad:{color:"#60a5fa",label:"Р“СЂСѓСЃС‚РёС‚"},angry:{color:"#f87171",label:"Р—Р»РёС‚СЃСЏ"},excited:{color:"#e5c34b",label:"Р’РѕРѕРґСѓС€РµРІР»С‘РЅ"},anxious:{color:"#c084fc",label:"РўСЂРµРІРѕР¶РёС‚СЃСЏ"}},l=[{id:"agent-1",name:"РђР»РµРєСЃРµР№",avatar:"Рђ",mood:"happy",traits:["РѕР±С‰РёС‚РµР»СЊРЅС‹Р№","РѕРїС‚РёРјРёСЃС‚","Р»СЋР±РѕРїС‹С‚РЅС‹Р№"],description:"РњРѕР»РѕРґРѕР№ РёСЃСЃР»РµРґРѕРІР°С‚РµР»СЊ, РєРѕС‚РѕСЂС‹Р№ РІСЃРµРіРґР° РёС‰РµС‚ РЅРѕРІС‹Рµ Р·РЅР°РєРѕРјСЃС‚РІР°. Р’РµСЂРёС‚ РІ Р»СѓС‡С€РµРµ РІ Р»СЋРґСЏС….",currentPlan:"РџРѕРіРѕРІРѕСЂРёС‚СЊ СЃ РњР°СЂРёРЅРѕР№ Рѕ РІС‡РµСЂР°С€РЅРµРј СЃРѕР±С‹С‚РёРё",memories:["Р’СЃС‚СЂРµС‚РёР» РњР°СЂРёРЅСѓ РЅР° РїР»РѕС‰Р°РґРё","РџРѕСЃРїРѕСЂРёР» СЃ Р’РёРєС‚РѕСЂРѕРј Рѕ РїРѕР»РёС‚РёРєРµ","РќР°С€С‘Р» СЃС‚Р°СЂСѓСЋ РєРЅРёРіСѓ РІ Р±РёР±Р»РёРѕС‚РµРєРµ"]},{id:"agent-2",name:"РњР°СЂРёРЅР°",avatar:"Рњ",mood:"neutral",traits:["Р·Р°РґСѓРјС‡РёРІР°СЏ","С…СѓРґРѕР¶РЅРёС†Р°","РёРЅС‚СЂРѕРІРµСЂС‚"],description:"РўР°Р»Р°РЅС‚Р»РёРІР°СЏ С…СѓРґРѕР¶РЅРёС†Р°, РїСЂРµРґРїРѕС‡РёС‚Р°РµС‚ РѕРґРёРЅРѕС‡РµСЃС‚РІРѕ. РќР°Р±Р»СЋРґР°РµС‚ Р·Р° РјРёСЂРѕРј С‡РµСЂРµР· РїСЂРёР·РјСѓ РёСЃРєСѓСЃСЃС‚РІР°.",currentPlan:"Р—Р°РєРѕРЅС‡РёС‚СЊ РєР°СЂС‚РёРЅСѓ Р·Р°РєР°С‚Р°",memories:["Р Р°Р·РіРѕРІРѕСЂ СЃ РђР»РµРєСЃРµРµРј Р±С‹Р» РїСЂРёСЏС‚РЅС‹Рј","Р’РёРєС‚РѕСЂ РїРѕРєР°Р·Р°Р»СЃСЏ РіСЂСѓР±С‹Рј","РЈРІРёРґРµР»Р° РєСЂР°СЃРёРІС‹Р№ Р·Р°РєР°С‚"]},{id:"agent-3",name:"Р’РёРєС‚РѕСЂ",avatar:"Р’",mood:"angry",traits:["РїСЂСЏРјРѕР»РёРЅРµР№РЅС‹Р№","Р°РјР±РёС†РёРѕР·РЅС‹Р№","СѓРїСЂСЏРјС‹Р№"],description:"Р‘С‹РІС€РёР№ РІРѕРµРЅРЅС‹Р№, РїСЂРёРІС‹Рє РєРѕРјР°РЅРґРѕРІР°С‚СЊ. РќРµ С‚РµСЂРїРёС‚ СЃР»Р°Р±РѕСЃС‚Рё, РЅРѕ РіР»СѓР±РѕРєРѕ РІРЅСѓС‚СЂРё РѕРґРёРЅРѕРє.",currentPlan:"Р”РѕРєР°Р·Р°С‚СЊ СЃРІРѕСЋ РїСЂР°РІРѕС‚Сѓ РђР»РµРєСЃРµСЋ",memories:["РЎРїРѕСЂ СЃ РђР»РµРєСЃРµРµРј Р·Р°РєРѕРЅС‡РёР»СЃСЏ РЅРёС‡РµРј","РњР°СЂРёРЅР° РѕС‚РІРµСЂРЅСѓР»Р°СЃСЊ РїСЂРё РІСЃС‚СЂРµС‡Рµ","Р’СЃРїРѕРјРЅРёР» СЃР»СѓР¶Р±Сѓ РІ Р°СЂРјРёРё"]},{id:"agent-4",name:"Р•Р»РµРЅР°",avatar:"Р•",mood:"excited",traits:["СЌРЅРµСЂРіРёС‡РЅР°СЏ","Р»РёРґРµСЂ","СЌРјРїР°С‚"],description:"Р’СЂР°С‡ РїРѕ РїСЂРѕС„РµСЃСЃРёРё Рё РјРёСЂРѕС‚РІРѕСЂРµС† РїРѕ РЅР°С‚СѓСЂРµ. РЎС‚Р°СЂР°РµС‚СЃСЏ РїРѕРјРёСЂРёС‚СЊ РІСЃРµС… РІРѕРєСЂСѓРі.",currentPlan:"РћСЂРіР°РЅРёР·РѕРІР°С‚СЊ РѕР±С‰РёР№ СѓР¶РёРЅ РґР»СЏ РІСЃРµС…",memories:["РџРѕРјРѕРіР»Р° РЅРµР·РЅР°РєРѕРјС†Сѓ РЅР° СѓР»РёС†Рµ","Р—Р°РјРµС‚РёР»Р° РЅР°РїСЂСЏР¶РµРЅРёРµ РјРµР¶РґСѓ Р’РёРєС‚РѕСЂРѕРј Рё РђР»РµРєСЃРµРµРј","РџРѕР»СѓС‡РёР»Р° РїРёСЃСЊРјРѕ РѕС‚ СЃС‚Р°СЂРѕРіРѕ РґСЂСѓРіР°"]},{id:"agent-5",name:"Р”РјРёС‚СЂРёР№",avatar:"Р”",mood:"sad",traits:["Р·Р°РјРєРЅСѓС‚С‹Р№","СѓРјРЅС‹Р№","РјРµР»Р°РЅС…РѕР»РёС‡РЅС‹Р№"],description:"Р‘С‹РІС€РёР№ СѓС‡С‘РЅС‹Р№, РїРѕС‚РµСЂСЏР» Р»Р°Р±РѕСЂР°С‚РѕСЂРёСЋ РІ РїРѕР¶Р°СЂРµ. Р–РёРІС‘С‚ РЅР° РѕРєСЂР°РёРЅРµ Рё РёР·Р±РµРіР°РµС‚ Р»СЋРґРµР№.",currentPlan:"РџРѕРїС‹С‚Р°С‚СЊСЃСЏ РІРѕСЃСЃС‚Р°РЅРѕРІРёС‚СЊ Р·Р°РїРёСЃРё РёР· СЃРіРѕСЂРµРІС€РµР№ Р»Р°Р±РѕСЂР°С‚РѕСЂРёРё",memories:["РџРѕР¶Р°СЂ СѓРЅРёС‡С‚РѕР¶РёР» РґРµСЃСЏС‚СЊ Р»РµС‚ СЂР°Р±РѕС‚С‹","РњР°СЂРёРЅР° РѕРґРЅР°Р¶РґС‹ РїСЂРёРЅРµСЃР»Р° РµРґСѓ","РќРµ РґРѕРІРµСЂСЏРµС‚ Р’РёРєС‚РѕСЂСѓ"]},{id:"agent-6",name:"РћР»СЊРіР°",avatar:"Рћ",mood:"anxious",traits:["РѕСЃС‚РѕСЂРѕР¶РЅР°СЏ","РЅР°Р±Р»СЋРґР°С‚РµР»СЊРЅР°СЏ","СЃРєСЂС‹С‚РЅР°СЏ"],description:"РўРѕСЂРіРѕРІРєР° РЅР° СЂС‹РЅРєРµ. Р—РЅР°РµС‚ РІСЃРµ СЃРїР»РµС‚РЅРё РіРѕСЂРѕРґР°, РЅРѕ СЃР°РјР° РґРµСЂР¶РёС‚ РјРЅРѕРіРѕ СЃРµРєСЂРµС‚РѕРІ.",currentPlan:"Р Р°Р·СѓР·РЅР°С‚СЊ, С‡С‚Рѕ СЃР»СѓС‡РёР»РѕСЃСЊ РЅР° РїР»РѕС‰Р°РґРё РІС‡РµСЂР° РЅРѕС‡СЊСЋ",memories:["Р’РёРґРµР»Р° Р’РёРєС‚РѕСЂР° РІ РїРµСЂРµСѓР»РєРµ РїРѕР·РґРЅРѕ РЅРѕС‡СЊСЋ","Р•Р»РµРЅР° РїРѕРєСѓРїР°РµС‚ Сѓ РЅРµС‘ С‚СЂР°РІС‹ РєР°Р¶РґСѓСЋ РЅРµРґРµР»СЋ","РљС‚Рѕ-С‚Рѕ СЃР»РµРґРёС‚ Р·Р° РЅРµР№ -- СѓРІРµСЂРµРЅР°"]},{id:"agent-7",name:"РРіРѕСЂСЊ",avatar:"Р",mood:"neutral",traits:["СЃРїРѕРєРѕР№РЅС‹Р№","СЃРїСЂР°РІРµРґР»РёРІС‹Р№","СЃС‚Р°СЂРѕРјРѕРґРЅС‹Р№"],description:"РџРѕР¶РёР»РѕР№ СЃС‚РѕСЂРѕР¶ Р±РёР±Р»РёРѕС‚РµРєРё. Р’РёРґРµР» РјРЅРѕРіРѕРµ, РіРѕРІРѕСЂРёС‚ РјР°Р»Рѕ, РЅРѕ РєРѕРіРґР° РіРѕРІРѕСЂРёС‚ -- РІСЃРµ СЃР»СѓС€Р°СЋС‚.",currentPlan:"РџСЂРёСЃРјР°С‚СЂРёРІР°С‚СЊ Р·Р° Р±РёР±Р»РёРѕС‚РµРєРѕР№ Рё С‡РёС‚Р°С‚СЊ С…СЂРѕРЅРёРєРё",memories:["РђР»РµРєСЃРµР№ С‡Р°СЃС‚Рѕ РїСЂРёС…РѕРґРёС‚ С‡РёС‚Р°С‚СЊ","РџРѕРјРЅРёС‚, РєР°РєРёРј Р±С‹Р» РіРѕСЂРѕРґ РґРѕ РІРѕР№РЅС‹","РќРµ РѕРґРѕР±СЂСЏРµС‚ РїРѕРІРµРґРµРЅРёРµ Р’РёРєС‚РѕСЂР°"]},{id:"agent-8",name:"РќР°СЃС‚СЏ",avatar:"Рќ",mood:"happy",traits:["Р¶РёР·РЅРµСЂР°РґРѕСЃС‚РЅР°СЏ","РЅР°РёРІРЅР°СЏ","С‚РІРѕСЂС‡РµСЃРєР°СЏ"],description:"РЎС‚СѓРґРµРЅС‚РєР°-РјСѓР·С‹РєР°РЅС‚, РЅРµРґР°РІРЅРѕ РїСЂРёРµС…Р°Р»Р° РІ РіРѕСЂРѕРґ. Р•С‰С‘ РЅРµ Р·РЅР°РµС‚ РјРµСЃС‚РЅС‹С… РёРЅС‚СЂРёРі.",currentPlan:"РќР°Р№С‚Рё РјРµСЃС‚Рѕ РґР»СЏ СЂРµРїРµС‚РёС†РёРё Рё РїРѕР·РЅР°РєРѕРјРёС‚СЊСЃСЏ СЃ Р»СЋРґСЊРјРё",memories:["Р“РѕСЂРѕРґ РїРѕРєР°Р·Р°Р»СЃСЏ РєСЂР°СЃРёРІС‹Рј, РЅРѕ СЃС‚СЂР°РЅРЅС‹Рј","РњР°СЂРёРЅР° СѓР»С‹Р±РЅСѓР»Р°СЃСЊ РµР№ РЅР° СѓР»РёС†Рµ","РЈСЃР»С‹С€Р°Р»Р° РіСЂРѕРјРєРёР№ СЃРїРѕСЂ РЅР° РїР»РѕС‰Р°РґРё"]}],i=[{id:"evt-1",agentId:"agent-1",agentName:"РђР»РµРєСЃРµР№",type:"chat",text:"РџСЂРёРІРµС‚, РњР°СЂРёРЅР°! РљР°Рє С‚РІРѕСЏ РЅРѕРІР°СЏ РєР°СЂС‚РёРЅР°?",timestamp:new Date(Date.now()-3e5).toISOString()},{id:"evt-2",agentId:"agent-2",agentName:"РњР°СЂРёРЅР°",type:"emotion",text:"РџРѕС‡СѓРІСЃС‚РІРѕРІР°Р»Р° РїСЂРёР»РёРІ РІРґРѕС…РЅРѕРІРµРЅРёСЏ РѕС‚ Р·Р°РєР°С‚Р°",timestamp:new Date(Date.now()-24e4).toISOString()},{id:"evt-3",agentId:"agent-3",agentName:"Р’РёРєС‚РѕСЂ",type:"action",text:"РћС‚РїСЂР°РІРёР»СЃСЏ РЅР° РїР»РѕС‰Р°РґСЊ, С‡С‚РѕР±С‹ РЅР°Р№С‚Рё РђР»РµРєСЃРµСЏ",timestamp:new Date(Date.now()-18e4).toISOString()},{id:"evt-4",agentId:"agent-4",agentName:"Р•Р»РµРЅР°",type:"chat",text:"Р’РёРєС‚РѕСЂ, РґР°РІР°Р№ РїРѕРіРѕРІРѕСЂРёРј СЃРїРѕРєРѕР№РЅРѕ. РЇ СѓРІРµСЂРµРЅР°, РІС‹ СЃ РђР»РµРєСЃРµРµРј РЅР°Р№РґС‘С‚Рµ РѕР±С‰РёР№ СЏР·С‹Рє.",timestamp:new Date(Date.now()-12e4).toISOString()},{id:"evt-5",agentId:"agent-3",agentName:"Р’РёРєС‚РѕСЂ",type:"emotion",text:"Р Р°Р·РґСЂР°Р¶С‘РЅ: Р•Р»РµРЅР° СЃРЅРѕРІР° Р»РµР·РµС‚ РЅРµ РІ СЃРІРѕС‘ РґРµР»Рѕ",timestamp:new Date(Date.now()-6e4).toISOString()},{id:"evt-6",agentId:"agent-1",agentName:"РђР»РµРєСЃРµР№",type:"action",text:"Р—Р°С€С‘Р» РІ Р±РёР±Р»РёРѕС‚РµРєСѓ Рё РЅР°С€С‘Р» РёРЅС‚РµСЂРµСЃРЅСѓСЋ РєРЅРёРіСѓ РѕР± РёСЃС‚РѕСЂРёРё РіРѕСЂРѕРґР°",timestamp:new Date(Date.now()-3e4).toISOString()},{id:"evt-7",agentId:"agent-2",agentName:"РњР°СЂРёРЅР°",type:"action",text:"РџРѕСЃС‚Р°РІРёР»Р° РјРѕР»СЊР±РµСЂС‚ Сѓ СЂРµРєРё Рё РЅР°С‡Р°Р»Р° СЂРёСЃРѕРІР°С‚СЊ",timestamp:new Date(Date.now()-15e3).toISOString()},{id:"evt-8",agentId:"agent-4",agentName:"Р•Р»РµРЅР°",type:"system",text:"Р РµС€РёР»Р° РѕСЂРіР°РЅРёР·РѕРІР°С‚СЊ РѕР±С‰РёР№ СѓР¶РёРЅ СЃРµРіРѕРґРЅСЏ РІРµС‡РµСЂРѕРј",timestamp:new Date(Date.now()-5e3).toISOString()},{id:"evt-9",agentId:"agent-5",agentName:"Р”РјРёС‚СЂРёР№",type:"action",text:"РќР°С€С‘Р» РѕР±РіРѕСЂРµРІС€РёР№ РґРЅРµРІРЅРёРє СЃСЂРµРґРё СЂСѓРёРЅ Р»Р°Р±РѕСЂР°С‚РѕСЂРёРё",timestamp:new Date(Date.now()-28e4).toISOString()},{id:"evt-10",agentId:"agent-6",agentName:"РћР»СЊРіР°",type:"emotion",text:"РўСЂРµРІРѕРіР° РЅР°СЂР°СЃС‚Р°РµС‚ -- РєС‚Рѕ-С‚Рѕ РѕРїСЂРµРґРµР»С‘РЅРЅРѕ СЃР»РµРґРёС‚",timestamp:new Date(Date.now()-2e5).toISOString()},{id:"evt-11",agentId:"agent-7",agentName:"РРіРѕСЂСЊ",type:"action",text:"РћС‚РєСЂС‹Р» СЃС‚Р°СЂС‹Р№ Р°СЂС…РёРІ РІ РїРѕРґРІР°Р»Рµ Р±РёР±Р»РёРѕС‚РµРєРё",timestamp:new Date(Date.now()-15e4).toISOString()},{id:"evt-12",agentId:"agent-8",agentName:"РќР°СЃС‚СЏ",type:"chat",text:"РџСЂРѕСЃС‚РёС‚Рµ, РІС‹ РЅРµ РїРѕРґСЃРєР°Р¶РµС‚Рµ, РіРґРµ С‚СѓС‚ РјРѕР¶РЅРѕ РїРѕСЂРµРїРµС‚РёСЂРѕРІР°С‚СЊ?",timestamp:new Date(Date.now()-9e4).toISOString()}],c=[{from:"agent-1",to:"agent-2",sentiment:.7,label:"РґСЂСѓР¶Р±Р°"},{from:"agent-1",to:"agent-3",sentiment:-.4,label:"РєРѕРЅС„Р»РёРєС‚"},{from:"agent-1",to:"agent-7",sentiment:.4,label:"СѓРІР°Р¶РµРЅРёРµ"},{from:"agent-2",to:"agent-5",sentiment:.3,label:"СЃРѕС‡СѓРІСЃС‚РІРёРµ"},{from:"agent-2",to:"agent-8",sentiment:.5,label:"СЃРёРјРїР°С‚РёСЏ"},{from:"agent-3",to:"agent-4",sentiment:-.2,label:"СЂР°Р·РґСЂР°Р¶РµРЅРёРµ"},{from:"agent-3",to:"agent-7",sentiment:-.3,label:"РЅРµРїСЂРёСЏР·РЅСЊ"},{from:"agent-4",to:"agent-6",sentiment:.4,label:"С‚РѕСЂРіРѕРІР»СЏ"},{from:"agent-4",to:"agent-1",sentiment:.5,label:"Р·РЅР°РєРѕРјС‹Рµ"},{from:"agent-6",to:"agent-3",sentiment:-.1,label:"РїРѕРґРѕР·СЂРµРЅРёРµ"},{from:"agent-8",to:"agent-1",sentiment:.2,label:"Р·РЅР°РєРѕРјС‹Рµ"},{from:"agent-5",to:"agent-7",sentiment:.2,label:"СЃРѕСЃРµРґРё"}],d={totalEvents:847,totalConversations:234,avgMood:.62,mostActiveAgent:"РђР»РµРєСЃРµР№",topRelationship:{from:"agent-1",to:"agent-2",sentiment:.7},eventsByType:[{type:"chat",count:312},{type:"action",count:289},{type:"emotion",count:178},{type:"system",count:68}],moodDistribution:[{mood:"happy",count:2},{mood:"neutral",count:2},{mood:"sad",count:1},{mood:"angry",count:1},{mood:"excited",count:1},{mood:"anxious",count:1}]};async function m(e,t){let r,a=new Headers(t?.headers);a.set("Accept","application/json"),a.set("X-User-Id",(r=n.default.env.NEXT_PUBLIC_USER_ID?.trim())&&r.length>0?r:"demo-user"),t?.body&&!a.has("Content-Type")&&a.set("Content-Type","application/json");let o=await fetch(`/api/backend${e}`,{...t,headers:a,cache:"no-store"});if(!o.ok)throw Error(`Backend request failed: ${o.status} ${o.statusText}`);return await o.json()}function u(e){var t,r,a;let o,n,s,l=(t=e.status,r=e.energy,a=e.emotion,o=t.toLowerCase(),n=a?.trim().toLowerCase()??"",s=Number.isFinite(r)?Math.max(0,Math.min(1,r)):.5,n.includes("СЂР°РґРѕСЃС‚")||n.includes("СЃС‡Р°СЃС‚")||n.includes("РІРґРѕС…РЅРѕРІ")||n.includes("РІРѕРѕРґСѓС€")?"happy":n.includes("СЃРїРѕРєРѕР№")||n.includes("РЅРµР№С‚СЂР°Р»")?"neutral":n.includes("СѓСЃС‚Р°Р»")||n.includes("РіСЂСѓСЃС‚")?"sad":n.includes("СЂР°Р·РґСЂР°Р¶")||n.includes("Р·Р»")?"angry":n.includes("С‚СЂРµРІРѕРі")||n.includes("РЅР°РїСЂСЏР¶")?"anxious":o.includes("error")||o.includes("failed")?"angry":o.includes("stop")||o.includes("archived")?"sad":o.includes("pause")?"anxious":s>=.8?"excited":s>=.6?"happy":s>=.4?"neutral":s>=.2?"anxious":"sad"),i=function(e,t){if(t&&t.length>0)return t.slice(0,8);if(!e)return["adaptive"];let r=[{key:"openness",label:"curious"},{key:"conscientiousness",label:"disciplined"},{key:"extraversion",label:"social"},{key:"agreeableness",label:"cooperative"},{key:"neuroticism",label:"sensitive"}].map(t=>({label:t.label,value:Number(e[t.key]??0)})).sort((e,t)=>t.value-e.value).filter(e=>e.value>0).slice(0,3).map(e=>e.label);return r.length>0?r:["adaptive"]}(e.personalityTraits,e.traits),c=e.memories&&e.memories.length>0?e.memories:e.state?[`Current state: ${e.state}`]:[];return{id:e.agentId,name:e.name,avatar:e.name?.trim()?.charAt(0)?.toUpperCase()||"?",mood:l,traits:i,description:e.description?.trim()||`${e.model} • status: ${e.status}`,currentPlan:e.currentPlan?.trim()||e.state||"No current plan",memories:c}}function x(e){return!e||"object"!=typeof e||Array.isArray(e)?null:e}function p(e,t){if(e)for(let r of t){let t=e[r];if("string"==typeof t&&t.trim().length>0)return t.trim()}}async function g(e){try{return await m("/api/events",{method:"POST",body:JSON.stringify({type:"ui.note",payload:{text:e,message:e,source:"frontend",agentName:"Operator"}})}),!0}catch(e){return console.warn("[data] addEvent fallback, backend unavailable",e),!1}}async function f(e,t){let r=e.trim();if(!r)return null;let a={prompt:r,model:t?.trim()||void 0};try{let e=await m("/api/user-agents/generate",{method:"POST",body:JSON.stringify(a)});return u(e)}catch(e){return console.warn("[data] generateAgentWithAi failed",e),null}}async function b(){try{return(await m("/api/user-agents")).map(u)}catch(e){return console.warn("[data] getAgents fallback to mock",e),l}}async function h(){try{let[e,t]=await Promise.all([b(),m("/api/events")]),r=new Map(e.map(e=>[e.id,e]));return t.map(e=>{var t,a;let o,n,s,l,i;return t=e,a=r,n=x(t.payload),s=x(n?.payload)??n,l=p(s,["agentId","agent_id","id"])??p(x(s?.agent),["id","agentId"])??"system",i=p(s,["agentName","agent_name","name"])??a.get(l)?.name??"System",{id:t.id,agentId:l,agentName:i,type:(o=t.type.toLowerCase()).includes("chat")||o.includes("message")?"chat":o.includes("emotion")||o.includes("mood")?"emotion":o.includes("system")||o.includes("status")||o.includes("error")||o.includes("progress")?"system":"action",text:function(e,t){let r=x(e),a=p(r,["text","message","description","content"]);if(a)return a;if(r){let e=p(x(r.payload),["text","message","description","content"]);if(e)return e}try{let r=JSON.stringify(e);if(!r||"{}"===r)return t;return r.slice(0,200)}catch{return t}}(t.payload,t.type),timestamp:t.createdAt}})}catch(e){return console.warn("[data] getEvents fallback to mock",e),i}}async function y(){try{return(await m("/api/relationships")).map(e=>({from:e.from,to:e.to,sentiment:e.sentiment,label:e.label??"interaction"}))}catch(e){return console.warn("[data] getRelationships fallback to mock",e),c}}async function v(){try{var e;return{totalEvents:(e=await m("/api/stats")).totalEvents,totalConversations:e.totalConversations,avgMood:e.avgMood,mostActiveAgent:e.mostActiveAgent,topRelationship:e.topRelationship,eventsByType:e.eventsByType,moodDistribution:e.moodDistribution.map(e=>{let t;return{mood:(t=e.mood.trim().toLowerCase(),"happy"===t||"neutral"===t||"sad"===t||"angry"===t||"excited"===t||"anxious"===t?t:"neutral"),count:e.count}})}}catch(e){return console.warn("[data] getStats fallback to mock",e),d}}async function w(){try{let e=await m("/api/world/time");return{gameTime:e.gameTime,speed:e.speed}}catch(e){return console.warn("[data] getWorldTime failed",e),null}}async function j(e){try{let t=await m("/api/world/time/speed",{method:"POST",body:JSON.stringify({speed:e})});return{gameTime:t.gameTime,speed:t.speed}}catch(e){return console.warn("[data] setWorldTimeSpeed failed",e),null}}function N(e){return e>=.5?"#4ade80":e>=.2?"#86efac":e>-.2?"#555566":e>-.5?"#fca5a5":"#f87171"}function k({visible:e}){return(0,t.jsxs)("div",{className:"absolute inset-0 z-30 flex items-center justify-center",style:{backgroundColor:"var(--cyber-surface)",opacity:+!!e,pointerEvents:e?"auto":"none",transition:"opacity 0.6s ease"},children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 opacity-10",style:{backgroundImage:"linear-gradient(var(--cyber-glow) 1px, transparent 1px), linear-gradient(90deg, var(--cyber-glow) 1px, transparent 1px)",backgroundSize:"60px 60px"}}),(0,t.jsxs)("div",{className:"relative flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"h-16 w-16 rounded-full border flex items-center justify-center",style:{borderColor:"var(--cyber-glow)",boxShadow:"0 0 20px var(--cyber-glow-dim), inset 0 0 20px var(--cyber-glow-dim)",animation:"cyber-pulse 2s ease-in-out infinite"},children:(0,t.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"var(--cyber-glow)",strokeWidth:"1.5",children:[(0,t.jsx)("circle",{cx:"5",cy:"12",r:"2"}),(0,t.jsx)("circle",{cx:"19",cy:"6",r:"2"}),(0,t.jsx)("circle",{cx:"19",cy:"18",r:"2"}),(0,t.jsx)("line",{x1:"7",y1:"12",x2:"17",y2:"6"}),(0,t.jsx)("line",{x1:"7",y1:"12",x2:"17",y2:"18"})]})}),(0,t.jsx)("p",{className:"font-mono text-sm tracking-[0.2em] uppercase",style:{color:"var(--cyber-glow)",opacity:.6},children:"ЗАГРУЗКА ГРАФА"})]})]})}function C(){return(0,t.jsxs)("div",{className:"absolute bottom-3 left-3 z-20 flex items-center gap-4 px-3 py-2 font-mono text-[11px]",style:{backgroundColor:"rgba(10,10,15,0.85)",border:"1px solid rgba(229,195,75,0.15)"},children:[[{color:"#4ade80",label:"Дружба"},{color:"#555566",label:"Нейтрально"},{color:"#f87171",label:"Конфликт"}].map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"h-[2px] w-4",style:{backgroundColor:e.color}}),(0,t.jsx)("span",{style:{color:"var(--muted-foreground)"},children:e.label})]},e.label)),(0,t.jsx)("div",{className:"flex items-center gap-1.5 ml-2",style:{borderLeft:"1px solid rgba(229,195,75,0.15)",paddingLeft:8},children:(0,t.jsx)("span",{style:{color:"var(--muted-foreground)"},children:"Клик = профиль"})})]})}function S({onSelectAgent:a,refreshToken:o}){let n=(0,r.useRef)(null),l=(0,r.useRef)(null),[i,c]=(0,r.useState)({width:0,height:0}),[d,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)(!1),[p,g]=(0,r.useState)([]),[f,h]=(0,r.useState)([]),[v,w]=(0,r.useState)(null),[j,S]=(0,r.useState)(null),[T,M]=(0,r.useState)({x:0,y:0}),L=(0,r.useMemo)(()=>{let e;return e=new Set(p.map(e=>e.id)),{nodes:p.map(e=>({id:e.id,name:e.name,avatar:e.avatar,mood:e.mood,moodColor:s[e.mood].color,val:8})),links:f.filter(t=>e.has(t.from)&&e.has(t.to)).map(e=>({source:e.from,target:e.to,sentiment:e.sentiment,label:e.label,color:N(e.sentiment)}))}},[p,f]);(0,r.useEffect)(()=>{let e=!0;return x(!1),Promise.all([b(),y()]).then(([t,r])=>{e&&(g(t),h(r))}).finally(()=>{e&&x(!0)}),()=>{e=!1}},[o]),(0,r.useEffect)(()=>{let e=n.current;if(!e)return;let t=new ResizeObserver(e=>{for(let t of e)c({width:t.contentRect.width,height:t.contentRect.height})});return t.observe(e),()=>t.disconnect()},[]),(0,r.useEffect)(()=>{e.A(16727).then(e=>{w(()=>e.default),setTimeout(()=>m(!0),500)})},[]);let D=(0,r.useRef)(!1);(0,r.useEffect)(()=>{let t=l.current;t&&!D.current&&d&&(D.current=!0,t.d3Force("charge")?.strength(-300).distanceMax(500),t.d3Force("link")?.distance(120).strength(.35),t.d3Force("center")?.strength(.04),e.A(38154).then(({forceCollide:e})=>{t.d3Force("collide",e(30).strength(1).iterations(4)),t.d3ReheatSimulation()}),t.d3ReheatSimulation())},[d]),(0,r.useEffect)(()=>{let e=l.current;if(!e||!d||0===i.width)return;let t=setTimeout(()=>{e.zoomToFit(400,40),e.d3ReheatSimulation()},100);return()=>clearTimeout(t)},[i,d]);let I=(0,r.useCallback)((e,t,r)=>{let a=e.x??0,o=e.y??0,n=j?.id===e.id,s=Math.max(11/r,2.5);t.save(),n&&(t.beginPath(),t.arc(a,o,20,0,2*Math.PI),t.fillStyle="rgba(229,195,75,0.06)",t.fill()),t.beginPath(),t.arc(a,o,14,0,2*Math.PI),t.fillStyle="#111118",t.fill(),t.strokeStyle=n?"#e5c34b":e.moodColor,t.lineWidth=1.5,t.stroke(),t.textAlign="center",t.textBaseline="middle",t.font="bold 11.200000000000001px 'Geist Mono', monospace",t.fillStyle=n?"#e5c34b":e.moodColor,t.fillText(e.avatar,a,o+.5),r>.45&&(t.font=`${s}px 'Geist Mono', monospace`,t.fillStyle=n?"#e5c34b":"rgba(229,195,75,0.3)",t.fillText(e.name,a,o+14+s+3)),t.restore()},[j]),P=(0,r.useCallback)((e,t)=>{let r=e.source,a=e.target;null!=r.x&&null!=r.y&&null!=a.x&&null!=a.y&&(t.save(),t.beginPath(),t.moveTo(r.x,r.y),t.lineTo(a.x,a.y),t.strokeStyle=e.color,t.lineWidth=1.2,t.globalAlpha=.4,t.stroke(),t.restore())},[]),E=(0,r.useMemo)(()=>{if(!j)return null;let e=p.find(e=>e.id===j.id);if(!e)return null;let t=s[e.mood],r=f.filter(t=>t.from===e.id||t.to===e.id).map(t=>{let r=t.from===e.id?t.to:t.from,a=p.find(e=>e.id===r);return{name:a?.name??r,sentiment:t.sentiment,label:t.label}});return{agent:e,moodCfg:t,rels:r}},[j,p,f]),A=(0,r.useCallback)(e=>{a&&a(e.id)},[a]),R=(0,r.useCallback)(e=>{e.__dragging=!0,e.fx=e.x,e.fy=e.y},[]),O=(0,r.useCallback)(e=>{e.__dragging=!1,setTimeout(()=>{e.__dragging||(e.fx=void 0,e.fy=void 0)},300)},[]);return(0,t.jsxs)("div",{ref:n,className:"relative h-full w-full overflow-hidden",style:{backgroundColor:"var(--cyber-surface)"},onMouseMove:e=>{let t=n.current?.getBoundingClientRect();t&&M({x:e.clientX-t.left,y:e.clientY-t.top})},children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 opacity-[0.04]",style:{backgroundImage:"linear-gradient(var(--cyber-glow) 1px, transparent 1px), linear-gradient(90deg, var(--cyber-glow) 1px, transparent 1px)",backgroundSize:"50px 50px"}}),(0,t.jsx)(k,{visible:!d||!u}),v&&i.width>0&&(0,t.jsx)(v,{ref:l,graphData:L,width:i.width,height:i.height,backgroundColor:"transparent",d3AlphaDecay:.005,d3VelocityDecay:.25,warmupTicks:0,cooldownTime:1/0,nodeCanvasObject:I,nodePointerAreaPaint:(e,t,r)=>{let a=e.x??0,o=e.y??0;r.fillStyle=t,r.beginPath(),r.arc(a,o,22,0,2*Math.PI),r.fill()},nodeLabel:()=>"",nodeVal:()=>1,onNodeHover:e=>{S(e||null),n.current&&(n.current.style.cursor=e?"pointer":"default")},onNodeClick:A,onNodeDrag:R,onNodeDragEnd:O,enableNodeDrag:!0,linkCanvasObject:P,linkDirectionalParticles:0,linkPointerAreaPaint:()=>{},enableZoomInteraction:!0,enablePanInteraction:!0,minZoom:.3,maxZoom:6}),j&&E&&(0,t.jsxs)("div",{className:"absolute z-40 pointer-events-none font-mono",style:{left:Math.min(T.x+18,i.width-230),top:Math.max(T.y-14,8),backgroundColor:"rgba(10,10,15,0.94)",border:"1px solid rgba(229,195,75,0.2)",padding:"10px 14px",minWidth:"180px",maxWidth:"240px"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold",style:{backgroundColor:E.moodCfg.color+"25",color:E.moodCfg.color,border:`1px solid ${E.moodCfg.color}50`},children:E.agent.avatar}),(0,t.jsx)("span",{className:"text-sm",style:{color:"var(--cyber-glow)"},children:E.agent.name})]}),(0,t.jsxs)("div",{className:"text-[10px] flex items-center gap-1.5 mb-2",style:{color:E.moodCfg.color},children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:E.moodCfg.color}}),E.moodCfg.label,(0,t.jsx)("span",{style:{color:"var(--muted-foreground)",marginLeft:4},children:E.agent.traits.slice(0,2).join(", ")})]}),E.rels.length>0&&(0,t.jsxs)("div",{style:{borderTop:"1px solid rgba(229,195,75,0.1)"},className:"pt-1.5",children:[(0,t.jsx)("div",{className:"text-[9px] uppercase tracking-widest mb-1",style:{color:"var(--muted-foreground)"},children:"Связи"}),E.rels.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between text-[10px] py-0.5",children:[(0,t.jsx)("span",{style:{color:"var(--foreground)"},children:e.name}),(0,t.jsx)("span",{style:{color:N(e.sentiment),fontSize:"9px"},children:e.label})]},e.name))]}),0===E.rels.length&&(0,t.jsx)("div",{className:"text-[10px] pt-1",style:{color:"var(--muted-foreground)",borderTop:"1px solid rgba(229,195,75,0.1)",paddingTop:6},children:"Нет связей с другими агентами"})]}),(0,t.jsx)(C,{})]})}let T={chat:{label:"ЧАТ",color:"#4ade80"},action:{label:"ДЕЙСТВИЕ",color:"#e5c34b"},emotion:{label:"ЭМОЦИЯ",color:"#c084fc"},system:{label:"СИСТЕМА",color:"#60a5fa"}};function M({refreshToken:e}){let[a,o]=(0,r.useState)([]),[n,l]=(0,r.useState)([]),[i,c]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=!0;return c(!0),Promise.all([h(),b()]).then(([t,r])=>{e&&(o(t),l(r))}).finally(()=>{e&&c(!1)}),()=>{e=!1}},[e]),(0,t.jsxs)("div",{className:"flex h-full w-full",style:{backgroundColor:"var(--cyber-surface)"},children:[(0,t.jsxs)("aside",{className:"shrink-0 flex flex-col gap-3 overflow-y-auto border-r py-4 px-3",style:{borderColor:"rgba(229,195,75,0.15)",width:"clamp(160px, 15%, 220px)"},children:[(0,t.jsx)("span",{className:"font-mono text-[10px] tracking-widest uppercase px-1",style:{color:"var(--muted-foreground)"},children:"АГЕНТЫ ОНЛАЙН"}),n.map(e=>{let r=s[e.mood];return(0,t.jsxs)("div",{className:"flex items-center gap-2 px-2 py-2 rounded-sm",style:{backgroundColor:"rgba(229,195,75,0.04)"},children:[(0,t.jsx)("div",{className:"shrink-0 flex items-center justify-center font-mono text-xs font-bold rounded-sm",style:{width:32,height:32,backgroundColor:"rgba(229,195,75,0.1)",color:r.color,border:`1px solid ${r.color}`},children:e.avatar}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"font-mono text-xs truncate",style:{color:"var(--foreground)"},children:e.name}),(0,t.jsx)("div",{className:"font-mono text-[10px]",style:{color:r.color},children:r.label})]})]},e.id)})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,t.jsxs)("div",{className:"shrink-0 flex items-center justify-between px-4 py-2 border-b",style:{borderColor:"rgba(229,195,75,0.15)"},children:[(0,t.jsx)("span",{className:"font-mono text-sm tracking-widest uppercase",style:{color:"var(--cyber-glow)"},children:"ЛЕНТА СОБЫТИЙ"}),(0,t.jsxs)("span",{className:"font-mono text-[10px]",style:{color:"var(--muted-foreground)"},children:[a.length," ","событий"]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-3 flex flex-col gap-1.5",children:[i&&(0,t.jsx)("div",{className:"font-mono text-xs",style:{color:"var(--muted-foreground)"},children:"Загрузка событий..."}),!i&&0===a.length&&(0,t.jsx)("div",{className:"font-mono text-xs",style:{color:"var(--muted-foreground)"},children:"Событий пока нет"}),a.map(e=>{let r=T[e.type];return(0,t.jsxs)("div",{className:"group flex items-start gap-3 px-3 py-2.5 rounded-sm",style:{backgroundColor:"rgba(229,195,75,0.02)",borderLeft:`2px solid ${r.color}`,transition:"background-color 0.15s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(229,195,75,0.06)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(229,195,75,0.02)"},children:[(0,t.jsx)("span",{className:"shrink-0 font-mono text-[11px] tabular-nums pt-0.5",style:{color:"var(--muted-foreground)",width:"64px"},children:new Date(e.timestamp).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),(0,t.jsx)("span",{className:"shrink-0 font-mono text-[9px] tracking-wider uppercase px-1.5 py-0.5 rounded-sm mt-0.5",style:{color:r.color,backgroundColor:`${r.color}15`,border:`1px solid ${r.color}30`},children:r.label}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("span",{className:"font-mono text-xs font-bold mr-2",style:{color:"var(--cyber-glow)"},children:e.agentName}),(0,t.jsx)("span",{className:"font-mono text-xs",style:{color:"var(--foreground)",opacity:.85},children:e.text})]})]},e.id)})]})]})]})}function L({agent:e,onBack:r,fromGraph:a,allAgents:o,allEvents:n,allRelationships:l}){let i=s[e.mood],c=n.filter(t=>t.agentId===e.id),d=l.filter(t=>t.from===e.id||t.to===e.id);return(0,t.jsxs)("div",{className:"flex flex-col h-full",style:{backgroundColor:"var(--cyber-surface)"},children:[(0,t.jsxs)("div",{className:"shrink-0 flex items-center gap-3 px-5 py-3 border-b",style:{borderColor:"rgba(229,195,75,0.15)"},children:[(0,t.jsx)("button",{onClick:r,className:"font-mono text-xs tracking-wider uppercase cursor-pointer",style:{color:"var(--cyber-glow)",padding:"4px 10px",border:"1px solid rgba(229,195,75,0.25)",backgroundColor:"rgba(229,195,75,0.05)",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(229,195,75,0.15)",e.currentTarget.style.borderColor="rgba(229,195,75,0.5)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(229,195,75,0.05)",e.currentTarget.style.borderColor="rgba(229,195,75,0.25)"},children:a?"<- К ГРАФУ":"<- НАЗАД"}),(0,t.jsx)("span",{className:"font-mono text-sm tracking-widest uppercase",style:{color:"var(--cyber-glow)"},children:"ДОСЬЕ АГЕНТА"})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-5 py-4 flex flex-col gap-5",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"shrink-0 flex items-center justify-center font-mono text-2xl font-bold rounded-sm",style:{width:64,height:64,backgroundColor:"rgba(229,195,75,0.1)",color:i.color,border:`2px solid ${i.color}`,boxShadow:`0 0 12px ${i.color}30`},children:e.avatar}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 min-w-0",children:[(0,t.jsx)("h2",{className:"font-mono text-lg uppercase tracking-wider",style:{color:"var(--foreground)"},children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:i.color}}),(0,t.jsx)("span",{className:"font-mono text-xs",style:{color:i.color},children:i.label})]}),(0,t.jsx)("p",{className:"font-mono text-xs mt-1",style:{color:"var(--muted-foreground)"},children:e.description})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-mono text-[10px] tracking-widest uppercase mb-2",style:{color:"var(--muted-foreground)"},children:"ЧЕРТЫ ХАРАКТЕРА"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5",children:e.traits.map(e=>(0,t.jsx)("span",{className:"font-mono text-[11px] px-2 py-0.5 rounded-sm",style:{color:"var(--cyber-glow)",backgroundColor:"rgba(229,195,75,0.08)",border:"1px solid rgba(229,195,75,0.2)"},children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-mono text-[10px] tracking-widest uppercase mb-2",style:{color:"var(--muted-foreground)"},children:"ТЕКУЩИЙ ПЛАН"}),(0,t.jsx)("p",{className:"font-mono text-xs",style:{color:"var(--foreground)",opacity:.9},children:e.currentPlan})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-mono text-[10px] tracking-widest uppercase mb-2",style:{color:"var(--muted-foreground)"},children:"ОТНОШЕНИЯ"}),(0,t.jsx)("div",{className:"flex flex-col gap-1.5",children:d.map((r,a)=>{let n=r.from===e.id?r.to:r.from,s=o.find(e=>e.id===n),l=r.sentiment>0?"#4ade80":r.sentiment<0?"#f87171":"#a0a0b0";return(0,t.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 rounded-sm",style:{backgroundColor:"rgba(229,195,75,0.03)",borderLeft:`2px solid ${l}`},children:[(0,t.jsx)("span",{className:"font-mono text-xs",style:{color:"var(--foreground)"},children:s?.name||n}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-mono text-[10px]",style:{color:"var(--muted-foreground)"},children:r.label}),(0,t.jsxs)("span",{className:"font-mono text-xs font-bold",style:{color:l},children:[r.sentiment>0?"+":"",(100*r.sentiment).toFixed(0),"%"]})]})]},a)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-mono text-[10px] tracking-widest uppercase mb-2",style:{color:"var(--muted-foreground)"},children:"ВОСПОМИНАНИЯ"}),(0,t.jsx)("div",{className:"flex flex-col gap-1",children:e.memories.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-start gap-2 py-1",children:[(0,t.jsx)("div",{className:"shrink-0 mt-1.5 h-1 w-1 rounded-full",style:{backgroundColor:"var(--cyber-glow)",opacity:.5}}),(0,t.jsx)("span",{className:"font-mono text-xs",style:{color:"var(--foreground)",opacity:.8},children:e})]},r))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-mono text-[10px] tracking-widest uppercase mb-2",style:{color:"var(--muted-foreground)"},children:"ПОСЛЕДНИЕ СОБЫТИЯ"}),(0,t.jsx)("div",{className:"flex flex-col gap-1",children:c.map(e=>(0,t.jsxs)("div",{className:"flex items-start gap-2 py-1.5 px-2 rounded-sm",style:{backgroundColor:"rgba(229,195,75,0.02)"},children:[(0,t.jsx)("span",{className:"shrink-0 font-mono text-[10px] tabular-nums",style:{color:"var(--muted-foreground)",width:56},children:new Date(e.timestamp).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}),(0,t.jsx)("span",{className:"font-mono text-xs",style:{color:"var(--foreground)",opacity:.8},children:e.text})]},e.id))})]})]})]})}function D({preSelectedAgentId:e,onClearSelection:a,fromGraph:o,refreshToken:n}){let[l,i]=(0,r.useState)(e??null),[c,d]=(0,r.useState)([]),[m,u]=(0,r.useState)([]),[x,p]=(0,r.useState)([]),[g,v]=(0,r.useState)(!0),[w,j]=(0,r.useState)(""),[N,k]=(0,r.useState)(null),[C,S]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=!0;return v(!0),Promise.all([b(),h(),y()]).then(([t,r,a])=>{e&&(d(t),u(r),p(a))}).finally(()=>{e&&v(!1)}),()=>{e=!1}},[n]);let T=async()=>{let e=w.trim();if(e&&!C){S(!0),k(null);try{let t=await f(e);if(!t)return void k("Не удалось сгенерировать агента. Проверь backend и OPENAI_API_KEY.");let[r,a,o]=await Promise.all([b(),h(),y()]);d(r),u(a),p(o),j(""),i(t.id)}finally{S(!1)}}},M=(0,r.useRef)(e);e&&e!==M.current&&(M.current=e,l!==e&&i(e));let D=c.find(e=>e.id===l);return D?(0,t.jsx)(L,{agent:D,allAgents:c,allEvents:m,allRelationships:x,onBack:()=>{i(null),a?.()},fromGraph:o}):g?(0,t.jsx)("div",{className:"flex h-full items-center justify-center font-mono text-xs",style:{backgroundColor:"var(--cyber-surface)",color:"var(--muted-foreground)"},children:"Загрузка агентов..."}):(0,t.jsxs)("div",{className:"flex flex-col h-full",style:{backgroundColor:"var(--cyber-surface)"},children:[(0,t.jsxs)("div",{className:"shrink-0 flex items-center justify-between px-5 py-3 border-b",style:{borderColor:"rgba(229,195,75,0.15)"},children:[(0,t.jsx)("span",{className:"font-mono text-sm tracking-widest uppercase",style:{color:"var(--cyber-glow)"},children:"СПИСОК АГЕНТОВ"}),(0,t.jsxs)("span",{className:"font-mono text-[10px]",style:{color:"var(--muted-foreground)"},children:[c.length," ","агентов"]})]}),(0,t.jsxs)("div",{className:"px-5 py-3 border-b",style:{borderColor:"rgba(229,195,75,0.12)"},children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:w,onChange:e=>j(e.target.value),placeholder:"Опиши агента для ИИ...",className:"flex-1 font-mono text-xs px-3 py-2 rounded-sm outline-none",style:{backgroundColor:"rgba(229,195,75,0.04)",border:"1px solid rgba(229,195,75,0.2)",color:"var(--foreground)"},disabled:C}),(0,t.jsx)("button",{onClick:T,disabled:C||0===w.trim().length,className:"font-mono text-xs tracking-wider uppercase px-3 py-2 rounded-sm cursor-pointer disabled:cursor-not-allowed",style:{color:C?"var(--muted-foreground)":"var(--cyber-glow)",backgroundColor:C?"rgba(229,195,75,0.02)":"rgba(229,195,75,0.08)",border:"1px solid rgba(229,195,75,0.25)"},children:C?"ГЕНЕРАЦИЯ...":"СОЗДАТЬ ИИ"})]}),N?(0,t.jsx)("p",{className:"mt-2 font-mono text-[10px]",style:{color:"#f87171"},children:N}):null]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-5 py-4 grid grid-cols-1 md:grid-cols-2 gap-3 auto-rows-min",children:[0===c.length?(0,t.jsx)("div",{className:"col-span-full flex items-center justify-center font-mono text-xs py-8",style:{color:"var(--muted-foreground)"},children:'Агентов пока нет. Опиши первого и нажми "СОЗДАТЬ ИИ".'}):null,c.map(e=>{let r=s[e.mood];return(0,t.jsxs)("button",{onClick:()=>i(e.id),className:"text-left p-4 rounded-sm cursor-pointer flex items-start gap-3",style:{backgroundColor:"rgba(229,195,75,0.03)",border:"1px solid rgba(229,195,75,0.1)",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(229,195,75,0.08)",e.currentTarget.style.borderColor="rgba(229,195,75,0.3)",e.currentTarget.style.boxShadow="0 0 12px rgba(229,195,75,0.06)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(229,195,75,0.03)",e.currentTarget.style.borderColor="rgba(229,195,75,0.1)",e.currentTarget.style.boxShadow="none"},children:[(0,t.jsx)("div",{className:"shrink-0 flex items-center justify-center font-mono text-lg font-bold rounded-sm",style:{width:48,height:48,backgroundColor:"rgba(229,195,75,0.08)",color:r.color,border:`1px solid ${r.color}`},children:e.avatar}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-mono text-sm uppercase",style:{color:"var(--foreground)"},children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"h-1.5 w-1.5 rounded-full",style:{backgroundColor:r.color}}),(0,t.jsx)("span",{className:"font-mono text-[10px]",style:{color:r.color},children:r.label})]})]}),(0,t.jsx)("p",{className:"font-mono text-[11px] mt-1 line-clamp-2",style:{color:"var(--muted-foreground)"},children:e.description}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.traits.map(e=>(0,t.jsx)("span",{className:"font-mono text-[9px] px-1.5 py-0.5 rounded-sm",style:{color:"var(--cyber-glow)",backgroundColor:"rgba(229,195,75,0.06)",border:"1px solid rgba(229,195,75,0.15)"},children:e},e))})]})]},e.id)})]})]})}function I({label:e,value:r,sub:a}){return(0,t.jsxs)("div",{className:"flex flex-col gap-1 p-4 rounded-sm",style:{backgroundColor:"rgba(229,195,75,0.03)",border:"1px solid rgba(229,195,75,0.1)"},children:[(0,t.jsx)("span",{className:"font-mono text-[10px] tracking-widest uppercase",style:{color:"var(--muted-foreground)"},children:e}),(0,t.jsx)("span",{className:"font-mono text-2xl tabular-nums",style:{color:"var(--cyber-glow)",textShadow:"0 0 10px rgba(229,195,75,0.3)"},children:r}),a&&(0,t.jsx)("span",{className:"font-mono text-[10px]",style:{color:"var(--muted-foreground)"},children:a})]})}function P({items:e,maxVal:r}){return(0,t.jsx)("div",{className:"flex flex-col gap-2",children:e.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"font-mono text-[10px] tracking-wider uppercase shrink-0",style:{color:"var(--muted-foreground)",width:80},children:e.label}),(0,t.jsx)("div",{className:"flex-1 h-5 rounded-sm",style:{backgroundColor:"rgba(229,195,75,0.06)"},children:(0,t.jsx)("div",{className:"h-full rounded-sm",style:{width:`${Math.max(e.value/r*100,2)}%`,backgroundColor:e.color,opacity:.7,boxShadow:`0 0 8px ${e.color}40`,transition:"width 0.5s ease"}})}),(0,t.jsx)("span",{className:"font-mono text-xs tabular-nums shrink-0",style:{color:e.color,width:36,textAlign:"right"},children:e.value})]},e.label))})}function E({refreshToken:e}){let[a,o]=(0,r.useState)(null);if((0,r.useEffect)(()=>{let e=!0;return o(null),v().then(t=>{e&&o(t)}),()=>{e=!1}},[e]),!a)return(0,t.jsx)("div",{className:"flex h-full items-center justify-center font-mono text-xs",style:{backgroundColor:"var(--cyber-surface)",color:"var(--muted-foreground)"},children:"Загрузка статистики..."});let n={chat:"#4ade80",action:"#e5c34b",emotion:"#c084fc",system:"#60a5fa"},l={chat:"Чат",action:"Действие",emotion:"Эмоция",system:"Система"},i=Math.max(1,...a.eventsByType.map(e=>e.count)),c=Math.max(1,...a.moodDistribution.map(e=>e.count)),d=a.topRelationship.sentiment>0?"#4ade80":a.topRelationship.sentiment<0?"#f87171":"var(--muted-foreground)";return(0,t.jsxs)("div",{className:"flex flex-col h-full",style:{backgroundColor:"var(--cyber-surface)"},children:[(0,t.jsx)("div",{className:"shrink-0 flex items-center px-5 py-3 border-b",style:{borderColor:"rgba(229,195,75,0.15)"},children:(0,t.jsx)("span",{className:"font-mono text-sm tracking-widest uppercase",style:{color:"var(--cyber-glow)"},children:"СТАТИСТИКА МИРА"})}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-5 py-4 flex flex-col gap-5",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,t.jsx)(I,{label:"Всего событий",value:a.totalEvents}),(0,t.jsx)(I,{label:"Диалогов",value:a.totalConversations}),(0,t.jsx)(I,{label:"Среднее настроение",value:`${(100*a.avgMood).toFixed(0)}%`,sub:"0% = плохо, 100% = отлично"}),(0,t.jsx)(I,{label:"Самый активный",value:a.mostActiveAgent})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-mono text-[10px] tracking-widest uppercase mb-3",style:{color:"var(--muted-foreground)"},children:"СОБЫТИЯ ПО ТИПАМ"}),(0,t.jsx)(P,{items:a.eventsByType.map(e=>({label:l[e.type]||e.type,value:e.count,color:n[e.type]||"var(--cyber-glow)"})),maxVal:i})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-mono text-[10px] tracking-widest uppercase mb-3",style:{color:"var(--muted-foreground)"},children:"РАСПРЕДЕЛЕНИЕ НАСТРОЕНИЙ"}),(0,t.jsx)(P,{items:a.moodDistribution.map(e=>({label:s[e.mood].label,value:e.count,color:s[e.mood].color})),maxVal:c})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-mono text-[10px] tracking-widest uppercase mb-2",style:{color:"var(--muted-foreground)"},children:"САМАЯ СИЛЬНАЯ СВЯЗЬ"}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 rounded-sm",style:{backgroundColor:"rgba(229,195,75,0.04)",border:"1px solid rgba(229,195,75,0.15)"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"font-mono text-sm",style:{color:"var(--foreground)"},children:a.topRelationship.from}),(0,t.jsx)("span",{className:"font-mono text-xs",style:{color:"var(--muted-foreground)"},children:"<->"}),(0,t.jsx)("span",{className:"font-mono text-sm",style:{color:"var(--foreground)"},children:a.topRelationship.to})]}),(0,t.jsxs)("span",{className:"font-mono text-sm font-bold",style:{color:d},children:[a.topRelationship.sentiment>0?"+":"",(100*a.topRelationship.sentiment).toFixed(0),"%"]})]})]})]})]})}function A(){return(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center",style:{backgroundColor:"var(--cyber-surface)"},children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"h-20 w-20 rounded-sm border flex items-center justify-center",style:{borderColor:"rgba(229,195,75,0.2)",boxShadow:"0 0 20px rgba(229,195,75,0.05)"},children:(0,t.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"var(--cyber-glow)",strokeWidth:"1",opacity:"0.4",children:(0,t.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}),(0,t.jsx)("p",{className:"font-mono text-sm tracking-[0.2em] uppercase",style:{color:"var(--cyber-glow)",opacity:.4},children:"СООБЩЕНИЯ // СКОРО"}),(0,t.jsx)("p",{className:"font-mono text-xs",style:{color:"var(--muted-foreground)"},children:"Функция в разработке"})]})})}function R(){let[e,a]=(0,r.useState)("graph"),[n,s]=(0,r.useState)(1),[l,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[m,u]=(0,r.useState)(null),[x,p]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=!0,t=async()=>{let t=await w();t&&e&&(s(t.speed),i(t.gameTime))};t();let r=setInterval(t,1500);return()=>{e=!1,clearInterval(r)}},[]),(0,r.useEffect)(()=>{let e=setInterval(()=>{p(e=>e+1)},3e3);return()=>clearInterval(e)},[]);let f=async e=>{await g(e)?p(e=>e+1):console.warn("[ui] Event was not sent to backend, fallback mode is active")},b=async e=>{s(e);let t=await j(e);t&&(s(t.speed),i(t.gameTime),p(e=>e+1))},h=e=>{d(e),u("graph"),a("agents")};return(0,t.jsx)(o,{activeTab:e,onTabChange:e=>{a(e),"agents"!==e&&(d(null),u(null))},onAddEvent:f,timeSpeed:n,onTimeSpeedChange:b,worldTime:l,children:function(){switch(e){case"graph":return(0,t.jsx)(S,{onSelectAgent:h,refreshToken:x});case"events":return(0,t.jsx)(M,{refreshToken:x});case"stats":return(0,t.jsx)(E,{refreshToken:x});case"agents":return(0,t.jsx)(D,{refreshToken:x,preSelectedAgentId:c,onClearSelection:()=>{d(null),"graph"===m&&(a("graph"),u(null))},fromGraph:"graph"===m});case"messages":return(0,t.jsx)(A,{});default:return null}}()})}e.s(["default",()=>R],31713)}]);